<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Rainbow Books — Ordering & Payment (Prototype)</title>
<link rel="stylesheet" href="styles.css"> 
</head>
<body>
<header class="nav">
  <div class="nav-inner">
    <div class="logo"><span class="dot"></span> Rainbow Books</div>
    <div class="spacer"></div>
    <div class="pill">
      <!-- search icon -->
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M21 21l-3.9-3.9M10.8 18a7.2 7.2 0 1 1 0-14.4 7.2 7.2 0 0 1 0 14.4Z" stroke="#7c89a6" stroke-width="1.6" stroke-linecap="round"/></svg>
      <input id="search" placeholder="Search books, authors, ISBN…" />
    </div>
    <button id="openCart" class="btn badge">Cart<span id="cartCount" class="badge">0</span></button>
  </div>
</header>

<main class="shell">
  <!-- Tabs -->
  <div class="tabs">
    <button class="tab active" data-view="browse">Browse & Order</button>
    <button class="tab" data-view="checkout">Checkout</button>
    <button class="tab" data-view="track">Order Tracking</button>
  </div>

  <div class="views">
    <!-- BROWSE VIEW -->
    <section id="browse" class="active">
      <div class="grid">
        <div class="col-9">
          <div class="card">
            <h3>Featured Titles</h3>
            <div id="products" class="grid" style="grid-template-columns:repeat(2,1fr);gap:14px;"></div>
          </div>
        </div>
        <div class="col-3">
          <div class="card">
            <h3>Filters</h3>
            <div class="row">
              <span class="tag" data-filter="All">All</span>
              <span class="tag" data-filter="Fiction">Fiction</span>
              <span class="tag" data-filter="Non-fiction">Non-fiction</span>
              <span class="tag" data-filter="Kids">Kids</span>
            </div>
            <div class="hr"></div>
            <div class="hint">Use the search box to find authors or titles. Click a product to add it to cart. Quantity can be adjusted in the cart drawer.</div>
          </div>
          <div class="card" style="margin-top:14px">
            <h3>Click & Collect</h3>
            <label for="pickup">Select store</label>
            <select id="pickup">
              <option>Collins St (CBD)</option>
              <option>Richmond</option>
              <option>Geelong</option>
              <option>Bendigo (Franchise)</option>
            </select>
            <p class="inline-note">Your selection is used at checkout.</p>
          </div>
        </div>
      </div>
    </section>

    <!-- CHECKOUT VIEW -->
    <section id="checkout">
      <div class="grid">
        <div class="col-8">
          <div class="card">
            <h3>Customer & Delivery</h3>
            <form id="checkoutForm">
              <div class="form-row">
                <div>
                  <label>Full name</label>
                  <input type="text" id="name" required placeholder="Jane Doe">
                </div>
                <div>
                  <label>Email</label>
                  <input type="email" id="email" required placeholder="jane@example.com">
                </div>
              </div>
              <div class="form-row">
                <div>
                  <label>Phone</label>
                  <input type="tel" id="phone" required placeholder="+61…">
                </div>
                <div>
                  <label>Fulfilment</label>
                  <select id="fulfilment">
                    <option>Home Delivery</option>
                    <option>Click & Collect</option>
                  </select>
                </div>
              </div>
              <div class="form-row" id="addressRow">
                <div>
                  <label>Address</label>
                  <input type="text" id="addr1" placeholder="Street & number">
                </div>
                <div>
                  <label>Suburb / Postcode</label>
                  <input type="text" id="addr2" placeholder="Suburb, 3000">
                </div>
              </div>
              <div id="pickupRow" style="display:none">
                <label>Pickup location</label>
                <input type="text" id="pickupConfirm" readonly>
              </div>
              <div class="hr"></div>
              <h3>Payment</h3>
              <div class="form-row">
                <div>
                  <label>Card number</label>
                  <input type="text" id="card" placeholder="4242 4242 4242 4242" maxlength="19">
                </div>
                <div>
                  <label>Expiry / CVC</label>
                  <input type="text" id="exp" placeholder="MM/YY • CVC" maxlength="9">
                </div>
              </div>
              <p class="inline-note">This is a prototype. Do not enter real card details.</p>
              <div class="hr"></div>
              <button type="submit" class="btn">Pay & Place Order</button>
              <button type="button" id="toCart" class="btn ghost">Review Cart</button>
            </form>
          </div>
        </div>
        <div class="col-4">
          <div class="card">
            <h3>Order Summary</h3>
            <div id="summary"></div>
            <div class="hr"></div>
            <div class="total-row"><span class="muted">Subtotal</span><strong id="sumSub">$0.00</strong></div>
            <div class="total-row"><span class="muted">Shipping</span><strong id="sumShip">$0.00</strong></div>
            <div class="total-row"><span class="muted">GST (10%)</span><strong id="sumTax">$0.00</strong></div>
            <div class="hr"></div>
            <div class="total-row"><span>Total</span><strong id="sumTotal" class="price">$0.00</strong></div>
          </div>
          <div id="orderOk" class="card success" style="display:none;margin-top:14px">
            <strong>Order placed!</strong><br>
            Your order <code id="orderId"></code> is confirmed.
            <div style="margin-top:8px" class="status-pill ok">Status: Confirmed</div>
          </div>
        </div>
      </div>
    </section>

    <!-- TRACK VIEW -->
    <section id="track">
      <div class="grid">
        <div class="col-6">
          <div class="card">
            <h3>Track your order</h3>
            <label>Order ID</label>
            <input type="text" id="trackId" placeholder="e.g., RB-5F3A1C">
            <div class="row" style="margin-top:10px">
              <button class="btn" id="btnTrack">Check Status</button>
              <div id="trackStatus" class="status-pill" style="display:none">Looking up…</div>
            </div>
            <div id="trackResult" class="hint" style="margin-top:12px"></div>
          </div>
        </div>
        <div class="col-6">
          <div class="card">
            <h3>What’s included</h3>
            <p class="hint">This prototype covers browsing, cart, checkout, basic validation, and a mock tracking flow. Use it in your portfolio as your Week 10 interfaces.</p>
          </div>
        </div>
      </div>
    </section>
  </div>
</main>

<!-- CART DRAWER -->
<aside id="cartDrawer" class="drawer" aria-hidden="true">
  <header>
    <strong>Your Cart</strong>
    <div class="spacer"></div>
    <button id="closeCart" class="btn secondary">Close</button>
  </header>
  <div class="content">
    <div id="cartItems"></div>
    <div id="cartEmpty" class="empty" style="display:none">Your cart is empty. Add books from the Browse tab.</div>
  </div>
  <div class="foot">
    <div class="total-row"><span class="muted">Subtotal</span><strong id="cartSub">$0.00</strong></div>
    <button id="goCheckout" class="btn">Go to Checkout</button>
  </div>
</aside>

<div id="toast" class="toast">Added to cart</div>
<script>
  const BOOKS = [
  {id:"bk1", title:"The Rainbow’s End", author:"Veronica Watson", price:29.90, cat:"Fiction"},
  {id:"bk2", title:"Foundations of Publishing", author:"Jonathan Croft", price:39.50, cat:"Non-fiction"},
  {id:"bk3", title:"Victorian Trails", author:"Katherine Price", price:24.00, cat:"Non-fiction"},
  {id:"bk4", title:"Magic on how to write two reports in 17 hours", author:"Tharayuth. V", price:999.90, cat:"Fiction"},
  {id:"bk5", title:"Warehouse Wizardry", author:"Ida van Dorn", price:34.00, cat:"Non-fiction"},
  {id:"bk6", title:"Numbers that Sing", author:"Amrit Singh", price:27.50, cat:"Fiction"},
];
let state = {
  cart: [], filter: "All", q: "", pickup: "Collins St (CBD)", orderId: null
};

/* ---------- Helpers ---------- */
const $ = sel => document.querySelector(sel);
function money(n){ return "$" + (Math.round(n*100)/100).toFixed(2); }
function showToast(msg){ const t=$("#toast"); t.textContent=msg; t.classList.add("show"); setTimeout(()=>t.classList.remove("show"),1200); }

/* ---------- Render products ---------- */
function renderProducts(){
  const wrap = $("#products");
  const q = state.q.toLowerCase();
  const items = BOOKS.filter(b => (state.filter==="All"||b.cat===state.filter) && (b.title.toLowerCase().includes(q)||b.author.toLowerCase().includes(q)));
  wrap.innerHTML = items.map(b => `
    <div class="product">
      <div class="cover" aria-hidden="true">
        <svg width="40" height="40" viewBox="0 0 24 24"><path fill="#6b7a99" d="M4 4h11a3 3 0 0 1 3 3v13l-3-2-3 2-3-2-3 2V4z"/></svg>
      </div>
      <div class="meta">
        <h4>${b.title}</h4>
        <div class="author">${b.author} • <span class="muted">${b.cat}</span></div>
        <div class="row" style="margin-top:8px">
          <div class="price">${money(b.price)}</div>
          <div class="spacer"></div>
          <button class="btn" onclick="addToCart('${b.id}')">Add to cart</button>
        </div>
      </div>
    </div>
  `).join("");
}
renderProducts();

/* ---------- Cart ---------- */
function addToCart(id){
  const found = state.cart.find(x=>x.id===id);
  if(found) found.qty++; else state.cart.push({id, qty:1});
  updateCartUI(); showToast("Added to cart"); $("#cartDrawer").classList.add("open");
}
function setQty(id,delta){
  const item = state.cart.find(x=>x.id===id);
  if(!item) return;
  item.qty += delta;
  if(item.qty<=0){ state.cart = state.cart.filter(x=>x.id!==id); }
  updateCartUI();
}
function cartTotals(){
  const sub = state.cart.reduce((s,x)=> {
    const b = BOOKS.find(b=>b.id===x.id); return s + b.price*x.qty;
  },0);
  const ship = sub>80 ? 0 : 7.5;
  const tax = +(sub*0.10).toFixed(2);
  return {sub, ship, tax, total: sub+ship+tax};
}
function updateCartUI(){
  $("#cartCount").textContent = state.cart.reduce((s,x)=>s+x.qty,0);
  const items = state.cart.map(x=>{
    const b=BOOKS.find(b=>b.id===x.id);
    return `
      <div class="product" style="margin-bottom:10px">
        <div class="cover" aria-hidden="true"><svg width="36" height="36" viewBox="0 0 24 24"><path fill="#6b7a99" d="M4 4h11a3 3 0 0 1 3 3v13l-3-2-3 2-3-2-3 2V4z"/></svg></div>
        <div class="meta">
          <h4>${b.title}</h4>
          <div class="author">${b.author}</div>
          <div class="row" style="margin-top:6px">
            <div class="qty">
              <button onclick="setQty('${x.id}',-1)">−</button>
              <input value="${x.qty}" readonly />
              <button onclick="setQty('${x.id}',1)">+</button>
            </div>
            <div class="spacer"></div>
            <div class="price">${money(b.price*x.qty)}</div>
          </div>
        </div>
      </div>
    `;
  }).join("");
  $("#cartItems").innerHTML = items || "";
  $("#cartEmpty").style.display = state.cart.length? "none":"block";
  const t = cartTotals();
  $("#cartSub").textContent = money(t.sub);
  renderSummary();
}
updateCartUI();

/* ---------- Summary (Checkout) ---------- */
function renderSummary(){
  const t = cartTotals();
  $("#summary").innerHTML = state.cart.map(x=>{
    const b=BOOKS.find(b=>b.id===x.id);
    return `<div class="row"><span class="muted">${b.title} × ${x.qty}</span><span>${money(b.price*x.qty)}</span></div>`;
  }).join("") || `<div class="hint">No items yet.</div>`;
  $("#sumSub").textContent = money(t.sub);
  $("#sumShip").textContent = money(t.ship);
  $("#sumTax").textContent = money(t.tax);
  $("#sumTotal").textContent = money(t.total);
}

/* ---------- View & UI wiring ---------- */
document.querySelectorAll(".tab").forEach(btn=>{
  btn.addEventListener("click", ()=>{
    document.querySelectorAll(".tab").forEach(t=>t.classList.remove("active"));
    btn.classList.add("active");
    document.querySelectorAll(".views > section").forEach(v=>v.classList.remove("active"));
    document.getElementById(btn.dataset.view).classList.add("active");
  });
});
$("#openCart").onclick = ()=> $("#cartDrawer").classList.add("open");
$("#closeCart").onclick = ()=> $("#cartDrawer").classList.remove("open");
$("#goCheckout").onclick = ()=>{
  document.querySelector('[data-view="checkout"]').click();
  $("#cartDrawer").classList.remove("open");
};
$("#toCart").onclick = ()=> $("#openCart").click();

$("#search").addEventListener("input", e=>{ state.q = e.target.value; renderProducts(); });
document.querySelectorAll(".tag").forEach(t=>{
  t.addEventListener("click", ()=>{ state.filter = t.dataset.filter; renderProducts(); });
});
$("#pickup").addEventListener("change", e=> state.pickup = e.target.value);

/* ---------- Checkout behaviour ---------- */
$("#fulfilment").addEventListener("change", e=>{
  const mode = e.target.value;
  const address = mode==="Home Delivery";
  $("#addressRow").style.display = address? "grid":"none";
  $("#pickupRow").style.display = address? "none":"block";
  $("#pickupConfirm").value = state.pickup;
});
// initialise pickup row state
$("#pickupConfirm").value = state.pickup;

function validCard(num){ return /^\d{4}\s?\d{4}\s?\d{4}\s?\d{4}$/.test(num.trim()); }
function validExp(exp){ return /^\d{2}\/\d{2}\s?•\s?\d{3}$/.test(exp.trim()); }

$("#checkoutForm").addEventListener("submit", (e)=>{
  e.preventDefault();
  if(state.cart.length===0){ alert("Your cart is empty."); return; }
  const name=$("#name").value.trim(), email=$("#email").value.trim();
  const card=$("#card").value, exp=$("#exp").value;
  if(!name || !email){ alert("Please enter name and email."); return; }
  if(!validCard(card) || !validExp(exp)){ alert("Use mock format:\nCard: 4242 4242 4242 4242\nExpiry/CVC: 05/27 • 123"); return; }

  // Simulate placing order
  const id = "RB-" + Math.random().toString(16).slice(2,8).toUpperCase();
  state.orderId = id;
  $("#orderId").textContent = id;
  $("#orderOk").style.display = "block";
  showToast("Order placed: " + id);

  // Clear cart
  state.cart = [];
  updateCartUI();
});

/* ---------- Tracking ---------- */
$("#btnTrack").addEventListener("click", ()=>{
  const q = $("#trackId").value.trim();
  $("#trackStatus").style.display="inline-block"; $("#trackResult").textContent="";
  setTimeout(()=>{
    $("#trackStatus").style.display="none";
    if(q && state.orderId && q.toUpperCase()===state.orderId.toUpperCase()){
      $("#trackResult").innerHTML = `<div class="success"><strong>Found:</strong> Order <code>${q}</code> is <em>Processing at ${state.pickup}</em> — ETA 2–3 business days.</div>`;
    } else {
      $("#trackResult").innerHTML = `<div class="hint">No record for <code>${q||"—"}</code>. Try the confirmation ID shown after checkout.</div>`;
    }
  }, 800);
});

</script> 
</body>
</html>

